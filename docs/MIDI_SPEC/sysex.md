---
title: システムエクスクルーシブ仕様
---

# システムエクスクルーシブ仕様

この項では本音源が送受信するシステムエクスクルーシブについて説明します。

## はじめに

本音源の仕様は一部[XG 仕様書V1.35](https://jp.yamaha.com/files/download/other_assets/0/321740/xg_v135_j.pdf)に則っています。

これは、当サークル(fèng)がMIDIエクスクルーシブ会員ではないため自由にエクスクルーシブを作成できないことが理由です。

ここで、[MIDI1.0規格書](https://amei.or.jp/midistandardcommittee/MIDI1.0.pdf)の69ページを参照すると

> 公表されたエクスクルーシブのフォーマットは、一般の他のフォーマット（チャンネル・メッセージやコモン・メッセージ）とまったく同じ扱いとなり、そのフォーマットに忠実である限り、だれでも使用することができる

とあります。

そこで、本音源ではYAMAHAのシステムエクスクルーシブ・フォーマットに準拠することにしました。

YAMAHAのシステムエクスクルーシブのうち、送受信するのは次の2つです。

- パラメータチェンジ
- パラメータリクエスト(内部で使用)

なお、パラメータチェンジ・リクエストのアドレステーブルはXGのものとは一部を除いて異なりますのでご了承ください。

ここで、パラメータチェンジ・リクエストのフォーマットを示します。

|名称                  |データ(16進数)                    |備考          |
|----------------------|----------------------------------|--------------|
|XGパラメータチェンジ  |`F0 43 10 4C AH AM AL [データ] F7`|AH~AL:アドレス|
|XGパラメータリクエスト|`F0 43 30 4C AH AM AL [データ] F7`|AH~AL:アドレス|


### リセット系エクスクルーシブ

対応しているリセット系エクスクルーシブを示します。

|名称            |データ(16進数)                    |備考                                          |
|----------------|----------------------------------|----------------------------------------------|
|GMシステム・オン|`F0 7E 7F 09 01 F7`               |画面表示色：紫<br>基本はこれを使用してください|
|XGシステム・オン|`F0 43 10 4C 00 00 7E 00 F7`      |画面表示色：緑<br>表示色以外はGMリセットと同一|
|GSリセット      |`F0 41 10 42 12 40 00 7F 00 41 F7`|画面表示色：橙<br>表示色以外はGMリセットと同一|
|GSモード1       |`F0 41 10 42 12 00 00 7F 00 01 F7`|画面表示色：橙<br>表示色以外はGMリセットと同一|
|GSモード2       |`F0 41 10 42 12 00 00 7F 01 00 F7`|画面表示色：橙<br>表示色以外はGMリセットと同一|

### 画面表示系エクスクルーシブ

XG/GS両方のフォーマットに対応しています。

各フォーマットのデータの作り方についてはインターネット上に情報が多くありますのでここでの説明は割愛させていただきます。

#### GSフォーマット

`DISPLAYED LETTER(Address:10 00 00)`と`DISPLAYED DOT DATA(Address:10 01 00)`を受信します。

|名称                |データ(16進数)                           |備考                                                                 |
|--------------------|-----------------------------------------|---------------------------------------------------------------------|
|`DISPLAYED LETTER`  |`F0 41 10 45 12 10 00 00 [データ] sum F7`|途中のアドレスから送信しないでください<br>最大32文字まで             |
|`DISPLAYED DOT DATA`|`F0 41 10 45 12 10 01 00 [データ] sum F7`|途中のアドレスから送信しないでください<br>必ず1画面分送信してください|

!!! note inline end "情報"

    GSのシステムエクスクルーシブを受信時に**チェックサムのチェックは行っていません**。

#### XGフォーマット

`DISPLAY LETTER(Address:06 00 00)`と`DISPLAY BITMAP(Address:07 00 00)`を受信します。

|名称            |データ(16進数)                    |備考                                                                 |
|----------------|----------------------------------|---------------------------------------------------------------------|
|`DISPLAY LETTER`|`F0 43 10 4C 06 00 00 [データ] F7`|途中のアドレスから送信しないでください<br>最大32文字まで             |
|`DISPLAY BITMAP`|`F0 43 10 4C 07 00 00 [データ] F7`|途中のアドレスから送信しないでください<br>必ず1画面分送信してください|

!!! note inline end "情報"

    XGの仕様書には`DISPLAY BITMAP`は`07 vh 00`となっており、縦方向(v:0~7)・横方向(h:0~F)への拡張が可能ですが本音源では実装していません。

### イコライザ設定

本音源はXG音源のMulti EQに該当する機能を持っています。`shape`のパラメータが無いのを除けば同一のデータを受信します。

!!! warning inline end "注意"

    Multi EQの実装にはDACのFIRフィルタを使用しています。

    プリセット以外のパラメータ設定には時間がかかります。

    また現在任意のパラメータのセットは不安定なため推奨しません。

ここではXGパラメータチェンジのアドレスとデータの意味のみ示します。

|アドレス<br>(H)|アドレス<br>(M)|アドレス<br>(L)|サイズ<br>(16進数)|データ範囲<br>(16進数)|パラメータ     |備考                 |
|---------------|---------------|---------------|------------------|----------------------|---------------|---------------------|
|`02`           |           `40`|           `00`|`01`              |`00-04`               |`EQ type`      |0:FLAT<br>1:JAZZ<br>2:POPS<br>3:ROCK<br>4:CONCERT
|               |               |           `01`|`01`              |`34-4C`               |`EQ gain1`     |-12 - +12[dB]        |
|               |               |           `02`|`01`              |`04-28`               |`EQ frequency1`|32 - 2000[Hz]        |
|               |               |           `03`|`01`              |`01-78`               |`EQ Q1`        |0.1 - 12             |
|               |               |           `04`|`01`              |`not used`            |`not used`     |未使用               |
|               |               |           `05`|`01`              |`34-4C`               |`EQ gain2`     |-12 - +12[dB]        |
|               |               |           `06`|`01`              |`04-28`               |`EQ frequency2`|32 - 2000[Hz]        |
|               |               |           `07`|`01`              |`01-78`               |`EQ Q2`        |0.1 - 12             |
|               |               |           `08`|`01`              |`not used`            |`not used`     |未使用               |
|               |               |           `09`|`01`              |`34-4C`               |`EQ gain3`     |-12 - +12[dB]        |
|               |               |           `0A`|`01`              |`04-28`               |`EQ frequency3`|32 - 2000[Hz]        |
|               |               |           `0B`|`01`              |`01-78`               |`EQ Q3`        |0.1 - 12             |
|               |               |           `0C`|`01`              |`not used`            |`not used`     |未使用               |
|               |               |           `0D`|`01`              |`34-4C`               |`EQ gain4`     |-12 - +12[dB]        |
|               |               |           `0E`|`01`              |`04-28`               |`EQ frequency4`|32 - 2000[Hz]        |
|               |               |           `0F`|`01`              |`01-78`               |`EQ Q4`        |0.1 - 12             |
|               |               |           `10`|`01`              |`not used`            |`not used`     |未使用               |
|               |               |           `11`|`01`              |`34-4C`               |`EQ gain5`     |-12 - +12[dB]        |
|               |               |           `12`|`01`              |`04-28`               |`EQ frequency5`|32 - 2000[Hz]        |
|               |               |           `13`|`01`              |`01-78`               |`EQ Q5`        |0.1 - 12             |
|               |               |           `14`|`01`              |`not used`            |`not used`     |未使用               |

ここで`EQ frequency`のテーブルを示します。

|Data(10進数)|Value(10進数)|
|------------|-------------|
|0           |THRU(20)     |
|1           |22           |
|2           |25           |
|3           |28           |
|4           |32           |
|5           |36           |
|6           |40           |
|7           |45           |
|8           |50           |
|9           |56           |
|10          |63           |
|11          |70           |
|12          |80           |
|13          |90           |
|14          |100          |
|15          |110          |
|16          |125          |
|17          |140          |
|18          |160          |
|19          |180          |
|20          |200          |
|21          |225          |
|22          |250          |
|23          |280          |
|24          |315          |
|25          |355          |
|26          |400          |
|27          |450          |
|28          |500          |
|29          |560          |
|30          |630          |
|31          |700          |
|32          |800          |
|33          |900          |
|34          |1.0k         |
|35          |1.1k         |
|36          |1.2k         |
|37          |1.4k         |
|38          |1.6k         |
|39          |1.8k         |
|40          |2.0k         |
|41          |2.2k         |
|42          |2.5k         |
|43          |2.8k         |
|44          |3.2k         |
|45          |3.6k         |
|46          |4.0k         |
|47          |4.5k         |
|48          |5.0k         |
|49          |5.6k         |
|50          |6.3k         |
|51          |7.0k         |
|52          |8.0k         |
|53          |9.0k         |
|54          |10.0k        |
|55          |11.0k        |
|56          |12.0k        |
|57          |14.0k        |
|58          |16.0k        |
|59          |18.0k        |
|60          |THRU(20.0k)  |

!!! note inline end "情報"

    本音源の現在のサンプリング周波数は32kHzですので59,60は違いがないものと思われます。

### ユーザー音色転送

!!! warning inline end "注意"

    現在開発中の機能です。

    仕様が変更される可能性があります。

|アドレス<br>(H)|アドレス<br>(M)|アドレス<br>(L)|サイズ<br>(16進数)|データ範囲<br>(16進数)|パラメータ                   |備考                 |
|---------------|---------------|---------------|------------------|----------------------|-----------------------------|---------------------|
|`09`           |           `00`|     `音色番号`|`任意`            |`00-7F`               |`USER TIMBRE XFER PORT`      |                     |

なお音色ファイルのフォーマットは非公開です。音色エディタを使用してください。

データ量が大きいため転送後には十分時間を設けてください。

### その他

|アドレス<br>(H)|アドレス<br>(M)|アドレス<br>(L)|サイズ<br>(16進数)|データ範囲<br>(16進数)|パラメータ     |備考                 |
|---------------|---------------|---------------|------------------|----------------------|---------------|---------------------|
|`01`           |           `06`|           `00`|`1`               |`00-02`               |`SET UI COLOR` |リセットせずに画面配色のみを変更する<br>0:緑<br>1:橙<br>2:紫|